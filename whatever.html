<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Brain Damage Snake üêçüß†</title>

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: #000;
    overflow: hidden;
    display: grid;
    place-items: center;
    font-family: system-ui, sans-serif;
}

#scale {
    width: 375px;
    height: 812px;
    max-width: 100vw;
    max-height: 100vh;
    aspect-ratio: 375 / 812;
}

#game {
    width: 100%;
    height: 100%;
    background: #0f172a;
    position: relative;
    overflow: hidden;
}

/* fake vibration */
.shake {
    animation: shake 0.15s linear;
}
@keyframes shake {
    0% { transform: translate(0,0); }
    25% { transform: translate(-2px,1px); }
    50% { transform: translate(2px,-1px); }
    75% { transform: translate(-1px,2px); }
    100% { transform: translate(0,0); }
}

canvas {
    width: 100%;
    height: 100%;
    display: block;
    touch-action: none;
}

/* HUD */
#hud {
    position: absolute;
    top: 14px;
    left: 0;
    width: 100%;
    text-align: center;
    color: white;
    pointer-events: none;
}

#thought {
    position: absolute;
    bottom: 120px;
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    color: #000;
    padding: 8px 12px;
    border-radius: 12px;
    font-size: 13px;
    opacity: 0;
    transition: opacity .3s, transform .3s;
}

#thought.show {
    opacity: 1;
    transform: translateX(-50%) translateY(-6px);
}

.emoji {
    position: absolute;
    font-size: 26px;
    pointer-events: none;
    animation: float 1s ease-out forwards;
}
@keyframes float {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-50px); opacity: 0; }
}

.cow {
    position: absolute;
    font-size: 40px;
    top: 40%;
    animation: cow 3s linear forwards;
}
@keyframes cow {
    from { left: -60px; }
    to { left: 420px; }
}
</style>
</head>

<body>
<div id="scale">
<div id="game">
    <div id="hud">üêç Score: <span id="score">0</span></div>
    <div id="thought"></div>
    <canvas id="c"></canvas>
</div>
</div>

<script>
/* === CONFIG === */
const W = 375, H = 812, GRID = 25;
const COLS = Math.floor(W / GRID);
const ROWS = Math.floor(H / GRID);

/* === DOM === */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
canvas.width = W;
canvas.height = H;

const gameEl = document.getElementById("game");
const scoreEl = document.getElementById("score");
const thoughtEl = document.getElementById("thought");

/* === GAME STATE === */
let snake, dir, food, score, speed, invert, alive;

/* === FUNNY CONTENT === */
const THOUGHTS = [
    "why am I a snake",
    "this was a bad idea",
    "left feels wrong today",
    "am I lagging or thinking",
    "that cow broke physics",
    "brain.exe stopped",
    "who coded this",
    "why am I here",
    "who am I",
    "what is this thing",
    "i should go to a doctor"
];

const ITEMS = [
    { emoji: "üçé", type: "normal" },
    { emoji: "üå∂Ô∏è", type: "fast" },
    { emoji: "üîÑ", type: "invert" },
    { emoji: "üêÑ", type: "cow" }
];

/* === HELPERS === */
function rand(a){ return Math.floor(Math.random()*a); }

function spawnFood() {
    const item = ITEMS[rand(ITEMS.length)];
    return {
        ...item,
        x: rand(COLS),
        y: rand(ROWS)
    };
}

function thought() {
    thoughtEl.textContent = THOUGHTS[rand(THOUGHTS.length)];
    thoughtEl.classList.add("show");
    setTimeout(()=>thoughtEl.classList.remove("show"),1500);
}

function shake() {
    gameEl.classList.add("shake");
    setTimeout(()=>gameEl.classList.remove("shake"),150);
}

function emojiPop(x,y,emoji){
    const e = document.createElement("div");
    e.className = "emoji";
    e.textContent = emoji;
    e.style.left = x+"px";
    e.style.top = y+"px";
    gameEl.appendChild(e);
    setTimeout(()=>e.remove(),1000);
}

function flyingCow(){
    const c = document.createElement("div");
    c.className = "cow";
    c.textContent = "üêÑ‚úàÔ∏è";
    gameEl.appendChild(c);
    setTimeout(()=>c.remove(),3000);
}

/* === INPUT === */
function setDir(x,y){
    if (snake.length > 1 &&
        snake[0].x + x === snake[1].x &&
        snake[0].y + y === snake[1].y) return;
    dir = {x,y};
}

window.addEventListener("keydown",e=>{
    const m = invert
        ? {ArrowUp:[0,1],ArrowDown:[0,-1],ArrowLeft:[1,0],ArrowRight:[-1,0]}
        : {ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};
    if(m[e.key]) setDir(...m[e.key]);
});

/* mobile swipe */
let sx, sy;
canvas.addEventListener("touchstart",e=>{
    sx=e.touches[0].clientX;
    sy=e.touches[0].clientY;
},{passive:false});

canvas.addEventListener("touchmove",e=>{
    if(!sx) return;
    const dx=e.touches[0].clientX-sx;
    const dy=e.touches[0].clientY-sy;
    if(Math.abs(dx)>20||Math.abs(dy)>20){
        if(Math.abs(dx)>Math.abs(dy))
            setDir(dx>0?1:-1,0);
        else
            setDir(0,dy>0?1:-1);
        sx=sy=null;
    }
    e.preventDefault();
},{passive:false});

/* === GAME LOOP === */
function start(){
    snake=[{x:7,y:15},{x:6,y:15}];
    dir={x:1,y:0};
    food=spawnFood();
    score=0;
    speed=180;
    invert=false;
    alive=true;
    scoreEl.textContent=0;
    loop();
}

function loop(){
    if(!alive) return;

    const head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};

    if(head.x<0||head.y<0||head.x>=COLS||head.y>=ROWS||
       snake.some(s=>s.x===head.x&&s.y===head.y)){
        alive=false;
        setTimeout(()=>alert("üíÄ brain gone\nscore: "+score),50);
        return;
    }

    snake.unshift(head);

    if(head.x===food.x&&head.y===food.y){
        score++;
        scoreEl.textContent=score;
        shake();
        thought();
        emojiPop(head.x*GRID,head.y*GRID,food.emoji);

        if(food.type==="fast") speed=Math.max(80,speed-20);
        if(food.type==="invert"){ invert=true; setTimeout(()=>invert=false,4000); }
        if(food.type==="cow") flyingCow();

        food=spawnFood();
    } else snake.pop();

    draw();
    setTimeout(loop,speed);
}

function draw(){
    ctx.clearRect(0,0,W,H);

    ctx.font="22px serif";
    ctx.textAlign="center";
    ctx.fillText(food.emoji,food.x*GRID+GRID/2,food.y*GRID+GRID/2+8);

    snake.forEach((s,i)=>{
        if(i===0){
            ctx.fillText("üêç",s.x*GRID+GRID/2,s.y*GRID+GRID/2+8);
        } else {
            ctx.fillStyle="#22c55e";
            ctx.fillRect(s.x*GRID+3,s.y*GRID+3,GRID-6,GRID-6);
        }
    });
}

start();
</script>
</body>
</html>
